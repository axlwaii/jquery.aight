!function(e){"use strict";e.fn.aightbox=function(t){var i,n,a,r,o,p,d,c,l,s,u,h,g,v,f,m,x,w,C,B,k=!1;return w=this,C=e.extend({animate:!1,backdrop:"aight-backdrop",closeButton:"aight-close",carousel:!1,carouselGroup:!0,closeCharacter:"x",imageContainer:"aight-container",imageDescription:"aight-description",imageWrapper:"aight-image-wrapper",nextButton:"aight-next",nextCharacter:">",prevCharacter:"<",prevButton:"aight-prev",preloadImages:!1,spinnerClass:"aight-progress small",wrapper:"aight-wrapper"},t),B='<div id="'+C.backdrop+'"></div><div id="'+C.wrapper+'"><div id="'+C.imageContainer+'"><div id="'+C.nextButton+'" ><a href="#">'+C.nextCharacter+'</a></div><div id="'+C.prevButton+'"><a href="#">'+C.prevCharacter+'</a></div><div id="'+C.closeButton+'"><a href="#">'+C.closeCharacter+'</a></div><div id="'+C.imageWrapper+'"><img src="" alt=""/></div><p id="'+C.imageDescription+'"></p><div class="'+C.spinnerClass+'" style="display: none;"><div>Loadingâ€¦</div></div></div></div>',o=function(){var e=h.closest("ul").find("a");return e.length>1&&e.index(h)>=0?e:[]},a=function(t){n="prev"===t?n>0?n-1:d.length-1:n<d.length-1?n+1:0,h=e(d[n])},r=function(t){var i,n;return n=o(),n.length>0&&(i=n.index(h),i="prev"===t?i>0?i-1:n.length-1:i<n.length-1?i+1:0,h=e(n[i])),h},f=function(){k||(e("#"+C.prevButton).unbind("click").click(function(e){e.preventDefault(),C.carouselGroup?r("prev"):C.carousel&&a("prev"),m()}),e("#"+C.nextButton).unbind("click").click(function(e){e.preventDefault(),C.carouselGroup?r("next"):C.carousel&&a("next"),m()})),e("#"+C.closeButton).on("click",function(e){e.preventDefault(),s.fadeOut("slow"),l.hide()}),e("#"+C.backdrop).unbind("click").click(function(e){e.preventDefault(),s.fadeOut("slow"),l.hide()})},p=function(){e("body").append(B),l=e("#"+C.backdrop),s=e("#"+C.wrapper),u=e("#"+C.imageContainer),c=e("#"+C.imageDescription),g=e("#"+C.imageContainer+" ."+C.spinnerClass.split(" ")[0]),1===d.length&&(e("#"+C.prevButton).hide(),e("#"+C.nextButton).hide(),k=!0)},v=function(){d.on("click",function(t){t.preventDefault();var i;h=e(this),i=o(),i.length>1?(e("#"+C.prevButton).show(),e("#"+C.nextButton).show()):(e("#"+C.prevButton).hide(),e("#"+C.nextButton).hide()),n=d.index(h),m()})},m=function(){var t=e("#"+C.imageContainer+" img"),i=!1,n=h.prop("href"),a=h.find("img").prop("alt");0===t.length?(p(),e("#"+C.imageContainer+" img").prop("src",n),e("#"+C.imageContainer+" img").prop("alt",a),e("#aight-description").text(a),i=!0):(t.prop("src",n),t.prop("alt",a),e("#aight-description").text(a)),t=e("#"+C.imageContainer+" img"),u=e("#"+C.imageContainer),i&&(f(),o()<=1&&(e("#"+C.prevButton).hide(),e("#"+C.nextButton).hide())),c.hide(),t.hide(),s.fadeIn("slow"),g.show(),t.one("load",function(){g.hide(),t.show(),""!==a&&c.show(),C.animate===!0?u.animate({"margin-left":-(t.width()/2),"margin-top":-(t.height()/2)}):u.css({"margin-left":-(t.width()/2),"margin-top":-(t.height()/2)})}),l.fadeIn(200)},x=function(){var t='<div id="aight-preload" style="display: none;"></div>',i=[];e("body").append(t),d.each(function(){var e=new Image;e.src=this.href,i.push(e)}),e("#aight-preload").append(i)},i=function(){d=e(w.selector),C.preloadImages===!0&&x(),v()},i(),w}}(jQuery,window,document);